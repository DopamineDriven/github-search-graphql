# import RepoPartial from "./Partials/atomic/repo-partial.graphql"
# import GitHubPageInfoPartial from "./Partials/atomic/page-info-fields.graphql"

query GetFineDetailsByRepo(
	$login: String!
	$name: String!
	$state: [IssueState!]
) {
	user(login: $login) {
		id
		bio
		twitterUsername
		login
		avatarUrl(size: 250)
		repository(name: $name) {
			...RepoPartial
			commitComments(last: 1) {
				pageInfo {
					...GitHubPageInfoPartial
				}
				nodes {
					body
					bodyText
					bodyHTML
					id
					authorAssociation
					bodyText
					createdAt
					author {
						login
						avatarUrl(size: 250)
						url
					}
				}
			}
			issues(
				first: 10
				states: $state
				orderBy: { field: UPDATED_AT, direction: DESC }
			) {
				totalCount
				pageInfo {
					...GitHubPageInfoPartial
				}
				nodes {
					id
					url
					bodyUrl
					number
					title
					body
					viewerDidAuthor
					bodyText
					state
					bodyHTML
					reactions(first: 10) {
						pageInfo {
							...GitHubPageInfoPartial
						}
						nodes {
							user {
								avatarUrl
								login
							}
							content
							id
						}
					}
					createdAt
					updatedAt

					author {
						url
						login
						avatarUrl(size: 250)
					}
					participants(first: 0) {
						totalCount
					}
					reactions(first: 10) {
						totalCount
						pageInfo {
							...GitHubPageInfoPartial
						}
						nodes {
							content
						}
					}
					comments(
						first: 10
						orderBy: { field: UPDATED_AT, direction: DESC }
					) {
						totalCount
						pageInfo {
							...GitHubPageInfoPartial
						}
						nodes {
							bodyHTML
							body
							bodyText
							author {
								avatarUrl(size: 250)
								login
								url
							}
							createdAt
							updatedAt
							reactions(first: 10) {
								totalCount
								pageInfo {
									...GitHubPageInfoPartial
								}
								nodes {
									content
									createdAt
									user {
										login
										avatarUrl(size: 250)
										twitterUsername
										url
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
